# HTTPS加密原理

## HTTP传输
直接以明文的方式传输，不提供任何方式的加
## HTTPS
https = http + ssl/tls协议
### 加密通信的过程
ssl/tls协议位于tcp/ip协议与各种应用层之间，可以理解为先与服务器进行ssl链接
该协议会通过以下几种方式来确保安全性
1. 身份验证(确保服务器和客户端是可信的)
2. 使用非对称加密的方式交换**传输数据的密钥**，确保密钥交换过程是安全的
3. 使用第2步交换的密钥对传输的数据加密
4. 完整性检查。使用摘要算法对传输内容部分摘要然后进行(MD5或者SHA算法加密），内容 + 摘要部分加密内容 一起发送给服务器，服务器收到内容后也进行摘要算法对比两份数字指纹，如果一致表示消息是完整可信的，防止传输过程中被攻击者截取篡改

### 非对称加密
服务器在网上可以任意发布公钥，私钥保管在服务端
公钥可以对数据进行加密但只有私钥可以解密，
私钥加密的内容，只有公钥可以解密

### 对称加密
发送方和接收方各自保管者同一个密钥，加密和解密都是同一个密钥

### 身份验证
首先，实现https请求，服务器会向认证机构申请ssl证书
ssl证书 = 服务器网站完整信息 + 服务器公钥 + 数字签名（认证机构密钥对服务器公钥和网站信息加密）
建立ssl链接，服务器向客户端发送认证机构颁发的ssl证书
认证机构的公钥通常会自动植入浏览器中，客户端拿到ssl证书使用认证机构的公钥对证书的数字签名进行解密，
对数字签名解密后得到服务器公钥和网站信息与ssl证书中的网站信息和服务器公钥对比，从而确保服务端是安全的

### 密钥交换
客户端验证服务器是安全可信的，随机生成对称加密的密钥，使用服务器公钥加密传输
服务器使用私钥对客户端传输的信息解密得到对称加密的密钥

### 完整性检查
使用摘要算法实现完整性检查，为了防止传输过程中信息被劫持篡改。

ssl连接建立成功后，客户端和服务器就可以相对的安全的进行通信了